"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5378],{5378:(M,m,r)=>{r.r(m),r.d(m,{Tab2PageModule:()=>b});var a=r(4488),u=r(177),d=r(4341),p=r(1307),_=r(70),T=r(467),t=r(4438),h=r(7291),I=r(9721);function f(i,l){1&i&&(t.j41(0,"div",20),t.EFF(1,"+"),t.k0s())}function E(i,l){if(1&i&&(t.j41(0,"ion-select-option",21),t.EFF(1),t.k0s()),2&i){const s=l.$implicit;t.FS9("value",s.ID),t.R7$(),t.JRh(s.DESIGNATION)}}function C(i,l){if(1&i){const s=t.RV6();t.j41(0,"tr")(1,"td")(2,"ion-input",11),t.mxI("ngModelChange",function(e){const o=t.eBV(s).$implicit;return t.DH7(o.ID,e)||(o.ID=e),t.Njj(e)}),t.k0s()(),t.j41(3,"td")(4,"div",12),t.DNE(5,f,2,0,"div",13),t.j41(6,"ion-input",14),t.mxI("ngModelChange",function(e){const o=t.eBV(s).$implicit;return t.DH7(o.INITIATIVE_BONUS,e)||(o.INITIATIVE_BONUS=e),t.Njj(e)}),t.k0s()()(),t.j41(7,"td")(8,"ion-input",15),t.mxI("ngModelChange",function(e){const o=t.eBV(s).$implicit;return t.DH7(o.DESIGNATION,e)||(o.DESIGNATION=e),t.Njj(e)}),t.k0s()(),t.j41(9,"td")(10,"ion-input",14),t.mxI("ngModelChange",function(e){const o=t.eBV(s).$implicit;return t.DH7(o.CURR_HP,e)||(o.CURR_HP=e),t.Njj(e)}),t.k0s()(),t.j41(11,"td")(12,"ion-input",14),t.mxI("ngModelChange",function(e){const o=t.eBV(s).$implicit;return t.DH7(o.MAX_HP,e)||(o.MAX_HP=e),t.Njj(e)}),t.k0s()(),t.j41(13,"td")(14,"ion-input",14),t.mxI("ngModelChange",function(e){const o=t.eBV(s).$implicit;return t.DH7(o.AC,e)||(o.AC=e),t.Njj(e)}),t.k0s()(),t.j41(15,"td")(16,"ion-select",16),t.mxI("ngModelChange",function(e){const o=t.eBV(s).$implicit;return t.DH7(o.CONNECTED_TO,e)||(o.CONNECTED_TO=e),t.Njj(e)}),t.DNE(17,E,2,2,"ion-select-option",17),t.k0s()(),t.j41(18,"td")(19,"ion-button",18),t.bIt("click",function(){const e=t.eBV(s).index,o=t.XpG();return t.Njj(o.onRemovePerson(e))}),t.nrm(20,"ion-icon",19),t.k0s()()()}if(2&i){const s=l.$implicit,n=t.XpG();t.R7$(2),t.R50("ngModel",s.ID),t.R7$(3),t.Y8G("ngIf",s.INITIATIVE_BONUS>0),t.R7$(),t.R50("ngModel",s.INITIATIVE_BONUS),t.R7$(2),t.R50("ngModel",s.DESIGNATION),t.R7$(2),t.R50("ngModel",s.CURR_HP),t.R7$(2),t.R50("ngModel",s.MAX_HP),t.R7$(2),t.R50("ngModel",s.AC),t.R7$(2),t.R50("ngModel",s.CONNECTED_TO),t.R7$(),t.Y8G("ngForOf",n.customEntities)}}const N=[{path:"",component:(()=>{var i;class l{constructor(n,e,o,c){this.alertController=n,this.storageService=e,this.toastController=o,this.entityService=c,this.customEntities=[]}onAddEntity(){this.customEntities.push({ID:this.customEntities.length+1,INITIATIVE_BONUS:0,MAX_HP:0,CURR_HP:0,DESIGNATION:"",INITIATIVE:0,AC:0})}onSavePlayers(){var n=this;return(0,T.A)(function*(){for(const o of n.customEntities)if(""===o.DESIGNATION)return void(yield(yield n.toastController.create({message:"All Entities must have a valid designation.",icon:"close-outline",color:"danger",animated:!0,duration:5e3,position:"top"})).present());n.entityService.customEntities=n.customEntities,n.storageService.onSavePlayerEntities(n.customEntities),yield(yield n.toastController.create({message:"Successfully saved changes!",icon:"checkmark-outline",color:"success",duration:5e3,animated:!0,position:"top"})).present()})()}ngOnInit(){0!==this.entityService.customEntities.length&&(this.customEntities=[...this.entityService.customEntities])}onRemovePerson(n){var e=this;return(0,T.A)(function*(){const o=yield e.alertController.create({header:"Remove player? His/Her Companions will be confused!",animated:!0,mode:"ios",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete Player",role:"Destructive",cssClass:"alert-button-destructive"}]});yield o.present();const{role:c}=yield o.onDidDismiss();"Destructive"===c&&(e.customEntities.splice(n,1),e.customEntities.forEach((g,y)=>{g.ID=y+1,+g.CONNECTED_TO===n+1&&(console.log("true"),g.CONNECTED_TO=void 0)}))})()}}return(i=l).\u0275fac=function(n){return new(n||i)(t.rXU(a.hG),t.rXU(h.n),t.rXU(a.K_),t.rXU(I.T))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-tab2"]],decls:32,vars:3,consts:[[3,"translucent"],[1,"text-center"],[3,"fullscreen"],[1,"d-flex","flex-column","col-8","offset-2","mt-5"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-fill","align-content-stretch","mb-5"],["color","secondary","mode","ios",1,"col-12",3,"click"],["name","person-add-outline","slot","end"],["color","success","mode","ios",1,"col-12",3,"click"],["name","server-outline","slot","end"],["type","number","disabled","true",3,"ngModelChange","ngModel"],[1,"d-flex","align-items-center","justify-content-center","align-content-center"],["class","pb-2",4,"ngIf"],["type","number",3,"ngModelChange","ngModel"],["type","text","placeholder","input name here (important)",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["color","danger",3,"click"],["name","trash-outline","color","light"],[1,"pb-2"],[3,"value"]],template:function(n,e){1&n&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),t.EFF(3," Edit Party "),t.k0s()()(),t.j41(4,"ion-content",2)(5,"div",3)(6,"table",4)(7,"tr")(8,"th"),t.EFF(9,"ID"),t.k0s(),t.j41(10,"th"),t.EFF(11,"Initiative Bonus"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Name/Designation"),t.k0s(),t.j41(14,"th"),t.EFF(15,"curr. HP"),t.k0s(),t.j41(16,"th"),t.EFF(17,"Max HP"),t.k0s(),t.j41(18,"th"),t.EFF(19,"AC"),t.k0s(),t.j41(20,"th"),t.EFF(21,"Ally of?"),t.k0s(),t.nrm(22,"th"),t.k0s(),t.DNE(23,C,21,9,"tr",5),t.k0s(),t.j41(24,"div",6)(25,"ion-button",7),t.bIt("click",function(){return e.onAddEntity()}),t.nrm(26,"ion-icon",8),t.EFF(27," Add Player "),t.k0s()(),t.j41(28,"div",6)(29,"ion-button",9),t.bIt("click",function(){return e.onSavePlayers()}),t.nrm(30,"ion-icon",10),t.EFF(31," Save changes "),t.k0s()()()()),2&n&&(t.Y8G("translucent",!0),t.R7$(4),t.Y8G("fullscreen",!0),t.R7$(19),t.Y8G("ngForOf",e.customEntities))},dependencies:[a.Jm,a.W9,a.eU,a.iq,a.$w,a.Nm,a.Ip,a.BC,a.ai,a.su,a.Je,a.Gw,u.Sq,u.bT,d.BC,d.vS]}),l})()}];let P=(()=>{var i;class l{}return(i=l).\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[_.iI.forChild(N),_.iI]}),l})(),b=(()=>{var i;class l{}return(i=l).\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[a.bv,u.MD,d.YN,p.S,P]}),l})()}}]);