"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3205],{3205:(C,u,s)=>{s.r(u),s.d(u,{FightPageModule:()=>M});var g=s(177),c=s(4341),a=s(4488),d=s(70),h=s(467),t=s(4438),F=s(7291),m=s(9721),I=s(4517);const _=i=>({"background-color":i});function f(i,l){1&i&&t.nrm(0,"ion-icon",17)}function p(i,l){if(1&i){const o=t.RV6();t.j41(0,"tr",9)(1,"td")(2,"div",10),t.DNE(3,f,1,0,"ion-icon",11),t.j41(4,"ion-input",12),t.mxI("ngModelChange",function(n){const r=t.eBV(o).$implicit;return t.DH7(r.DESIGNATION,n)||(r.DESIGNATION=n),t.Njj(n)}),t.k0s()()(),t.j41(5,"td")(6,"ion-input",13),t.mxI("ngModelChange",function(n){const r=t.eBV(o).$implicit;return t.DH7(r.INITIATIVE,n)||(r.INITIATIVE=n),t.Njj(n)}),t.k0s()(),t.j41(7,"td")(8,"ion-input",14),t.mxI("ngModelChange",function(n){const r=t.eBV(o).$implicit;return t.DH7(r.CURR_HP,n)||(r.CURR_HP=n),t.Njj(n)}),t.k0s()(),t.j41(9,"td")(10,"ion-input",14),t.mxI("ngModelChange",function(n){const r=t.eBV(o).$implicit;return t.DH7(r.MAX_HP,n)||(r.MAX_HP=n),t.Njj(n)}),t.k0s()(),t.j41(11,"td")(12,"ion-input",14),t.mxI("ngModelChange",function(n){const r=t.eBV(o).$implicit;return t.DH7(r.AC,n)||(r.AC=n),t.Njj(n)}),t.k0s()(),t.j41(13,"td")(14,"ion-button",15),t.bIt("click",function(){const n=t.eBV(o).index,r=t.XpG();return t.Njj(r.onDefeated(n))}),t.nrm(15,"ion-icon",16),t.k0s()()()}if(2&i){const o=l.$implicit,e=l.index,n=t.XpG();t.Y8G("ngStyle",t.eq3(13,_,n.checkTurn(e))),t.R7$(3),t.Y8G("ngIf",o.PLAYER),t.R7$(),t.Y8G("disabled",o.IS_DEFEATED),t.R50("ngModel",o.DESIGNATION),t.R7$(2),t.Y8G("disabled",o.IS_DEFEATED),t.R50("ngModel",o.INITIATIVE),t.R7$(2),t.Y8G("disabled",o.IS_DEFEATED),t.R50("ngModel",o.CURR_HP),t.R7$(2),t.Y8G("disabled",o.IS_DEFEATED),t.R50("ngModel",o.MAX_HP),t.R7$(2),t.Y8G("disabled",o.IS_DEFEATED),t.R50("ngModel",o.AC),t.R7$(2),t.Y8G("disabled",o.IS_DEFEATED)}}const E=[{path:"",component:(()=>{var i;class l{constructor(e,n,r,P){this.storageService=e,this.entityService=n,this.toastController=r,this.navController=P,this.entitiesInFight=[],this.turn=0,this.round=1}ngOnInit(){var e=this;return(0,h.A)(function*(){if(e.entitiesInFight=[...e.entityService.currFightEntities],0==e.entitiesInFight.length)return yield(yield e.toastController.create({message:"No encounter found!",icon:"close-outline",color:"danger",duration:5e3,animated:!0,position:"top"})).present(),void(yield e.navController.navigateBack("/tabs/tracker"));e.entitiesInFight.sort((n,r)=>r.INITIATIVE-n.INITIATIVE)})()}onDefeated(e){this.entitiesInFight[e].IS_DEFEATED=!0}nextRound(){this.turn===this.entitiesInFight.length-1?(this.round++,this.turn=0):this.turn++,this.entitiesInFight[this.turn].IS_DEFEATED&&this.nextRound()}checkTurn(e){return e==this.turn?"green":"white"}}return(i=l).\u0275fac=function(e){return new(e||i)(t.rXU(F.n),t.rXU(m.T),t.rXU(a.K_),t.rXU(I.q9))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-fight"]],decls:27,vars:4,consts:[[3,"translucent"],[3,"fullscreen"],[1,"d-flex","col-8","offset-2","justify-content-center","flex-column"],[1,"d-flex","justify-content-end"],[1,"mt-5","table","table-hover"],[3,"ngStyle",4,"ngFor","ngForOf"],[1,"d-flex","flex-fill","align-content-stretch","mb-5"],["color","primary","mode","ios",1,"col-12",3,"click"],["name","chevron-forward-outline","slot","end","color","primary"],[3,"ngStyle"],[1,"d-flex","align-items-center"],["name","person","color","success",4,"ngIf"],["type","text","placeholder","Name",1,"pt-1",3,"ngModelChange","disabled","ngModel"],["type","text","placeholder","Name",3,"ngModelChange","disabled","ngModel"],["type","number",3,"ngModelChange","disabled","ngModel"],["color","danger",3,"click","disabled"],["name","skull-outline","color","light"],["name","person","color","success"]],template:function(e,n){1&e&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Encounter"),t.k0s()()(),t.j41(4,"ion-content",1)(5,"div",2)(6,"div",3),t.EFF(7),t.k0s(),t.j41(8,"table",4)(9,"tr")(10,"th"),t.EFF(11,"Name/Designation"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Initiative"),t.k0s(),t.j41(14,"th"),t.EFF(15,"Curr. HP"),t.k0s(),t.j41(16,"th"),t.EFF(17,"Max HP"),t.k0s(),t.j41(18,"th"),t.EFF(19,"AC"),t.k0s(),t.nrm(20,"th")(21,"th"),t.k0s(),t.DNE(22,p,16,15,"tr",5),t.k0s(),t.j41(23,"div",6)(24,"ion-button",7),t.bIt("click",function(){return n.nextRound()}),t.nrm(25,"ion-icon",8),t.EFF(26," Next "),t.k0s()()()()),2&e&&(t.Y8G("translucent",!0),t.R7$(4),t.Y8G("fullscreen",!0),t.R7$(3),t.SpI(" Round: ",n.round," "),t.R7$(15),t.Y8G("ngForOf",n.entitiesInFight))},dependencies:[g.Sq,g.bT,g.B3,c.BC,c.vS,a.Jm,a.W9,a.eU,a.iq,a.$w,a.BC,a.ai,a.su,a.Gw]}),l})()}];let T=(()=>{var i;class l{}return(i=l).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[d.iI.forChild(E),d.iI]}),l})(),M=(()=>{var i;class l{}return(i=l).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[g.MD,c.YN,a.bv,T]}),l})()}}]);